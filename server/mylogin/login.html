<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">

		<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="css/login.css" />
		<link rel="stylesheet" type="text/css" href="../css/public.css"/>
		<link rel="stylesheet" type="text/css" href="../css/propublic.css"/>
		<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>

		<script>
			$(document).ready(function() {
				//打开会员登录 
					$("#regist_container").hide();
					$("#_close").show();
					$("#_start").animate({
						left: '350px',
						height: '520px',
						width: '400px'
					}, 500, function() {
						$("#login_container").show(500);
						$("#_close").animate({
							height: '40px',
							width: '40px'
						}, 500);
					});
				//关闭
				$("#_close").click(function() {
					
					$("#_close").animate({
						height: '0px',
						width: '0px'
					}, 500, function() {
						$("#_close").hide(500);
						$("#login_container").hide(500);
						$("#regist_container").hide(500);
						$("#_start").animate({
							left: '0px',
							height: '0px',
							width: '0px'
						}, 500);
					});
				});
				//去 注册
				$("#toRegist").click(function(){
					$("#login_container").hide(500);
					$("#regist_container").show(500);
				});
				//去 登录
				$("#toLogin").click(function(){
					$("#regist_container").hide(500);
					$("#login_container").show(500);
				});
			});
		</script>
	</head>
	<body>
		<div id="top"></div>
		<div id='_start'>
			<div id='_close' style="display: none;">
				<span class="glyphicon glyphicon-remove"></span>
			</div>
			<br /> 
			<!--登录框-->
			<div id="login_container">
				<div id="lab1">
					<span id="lab_login">会员登录</span>
					<span id="lab_toRegist">
						&emsp;还没有账号&nbsp;
						<a href="register.html">立即注册</a>
					</span>
				</div>
				<div style="width:330px;">
					<span id="lab_type1">手机号/账号登陆</span>
				</div>
				<div id="form_container1">
					<br />
					<input type="text" class="form-control user" placeholder="手机号/用户名" id="login_number" value="admin" />
					<input type="password" class="form-control pass" placeholder="密码" id="login_password" />
					<input type="button" value="登录" class="mybtn btn-success2" id="login_btn2" />
					<span id="rememberOrfindPwd">
						<span>
							<input id="remember" type="checkbox" style="margin-bottom: -1.5px;"/>
						</span>
					<span style="color:#000000">
							记住密码&emsp;&emsp;&emsp;&emsp;
					</span>
					</span>
				</div>

				<div style="display:block;width:330px;height：40px;">
					<span id="lab_type2">使用第三方直接登陆</span>
				</div>
				<div style="width:330px;height:100px;border-bottom: 1px solid #FFFFFF;">
					<br />
					<button id="login_QQ" type="button" class="btn btn-info">
						<img src="img/qq32.png" style="width:20px;margin-top:-4px;" />&emsp;QQ登录
					</button>
					<button id="login_WB" type="button" class="btn btn-danger">
						<img src="img/sina32.png" style="width:20px;margin-top:-4px;" />&emsp;微博登录
					</button>
				</div>
			</div>
		</div>
	</body>
	<script src="../libs/jquery.2.2.4.js" type="text/javascript" charset="utf-8"></script>
	<script src="../libs/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
	<script src="../libs/cookie.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			class Login{
				constructor(){
					this.url ="http://www.icodeilife.cn/ctrl/login.php";
					this.init()
				}
				init(){
					let that = this;
					$(".mybtn").click(function(){
						that.load();
					})
				}
				load(){
						
						
//						console.log($.cookie('login_cookie'));
//						console.log(getCookie("login_cookie"))
				    let that = this;
				    $.ajax({
				    	url:this.url,
				    	data:{
				    		user:$(".user").val(),
				    		pass:$(".pass").val(),    		
				    	},
				    	success:function(res){				    		
                            switch (res){
                            	case "0":alert("用户名密码不符")
                            		break;
                            	case "1":alert("用户名密码不能为孔")
                            		break;	
                            	default:
                            		let login_user = $("#login_number").val();
									$.cookie('login_cookie', login_user,{expires:7,path:'/'});
									console.log($.cookie('login_cookie'))
                            	window.location.href="../index.html";
                            		break;
                            }
				    	}
				    })
				}
			}
			 	
			new Login;
			
			$("#login_QQ").click(function(){
				alert("敬请期待！");
			});
			$("#login_WB").click(function(){
				alert("敬请期待！");
			});
		});
		
		$("#top").load("../index.html #top");
	</script>

</html>